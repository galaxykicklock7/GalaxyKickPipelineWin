version: v1.0
name: Trigger Deployment

agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu2004

blocks:
  - name: Initialize
    task:
      jobs:
        - name: Ready
          commands:
            - echo "Ready to deploy"
            - echo "Waiting for promotion with parameters..."

promotions:
  - name: Deploy Backend
    pipeline_file: deploy.yml
    parameters:
      env_vars:
        - name: TUNNEL_SUBDOMAIN
          required: true
          default_value: best-backend
          description: Custom subdomain for LocalTunnel (e.g., user-123)
        - name: DURATION
          required: false
          default_value: "60"
          description: Run duration in minutes (max 60)
